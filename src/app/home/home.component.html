<div [ngBusy]="{busy: busy, backdrop: true}"></div>
<div class="container home-container">
  <div class="row">

    <div class="col-lg-12">

      <div id="carouselExampleIndicators" class="carousel slide my-4" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner" role="listbox">
          <div class="carousel-item active">
            <img class="d-block img-fluid" *ngIf="bannerImages && bannerImages.length != 0"
              src="{{apiLink + '/banner/banner-1.jpg' }}"
              alt="First slide">
          </div>
          <div class="carousel-item">
            <img class="d-block img-fluid" *ngIf="bannerImages && bannerImages.length != 0"
              src="{{apiLink + '/banner/banner-2.jpg' }}" alt="Second slide">
          </div>
          <div class="carousel-item">
            <img class="d-block img-fluid" *ngIf="bannerImages && bannerImages.length != 0" src="{{apiLink + '/banner/banner-3.jpg' }}"
              alt="Third slide">
          </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>

      <div class="row">
        <div class="col-lg-3 ">
          <div class="search-panel">
            <form (submit)="search($event)">
              <div class="form-group">
                  <label class="strong">Upload image</label>
                  <div class="avatar-upload">
                    <div class="avatar-edit">
                      <input type='file' name="searched-image" id="imageUpload" accept=".png, .jpg, .jpeg" />
                      <label for="imageUpload"></label>
                    </div>
                    <div class="avatar-preview">
                      <div id="imagePreview" style="background-image: url(http://i.pravatar.cc/500?img=7);">
                      </div>
                    </div>
                  </div> 
              </div>
              <!-- <div class="form-group">

                <label>Master category</label>
                <input autocomplete="off" class="form-control" [(ngModel)]="masterCategory" type="text"
                  id="master-category" name="master-category" placeholder="Master category">

                <div class="drop-down-wrap" *ngIf="masterCatFocus">
                  <ul class="drop-down-ul">
                    <li *ngFor="let cat of masterCategories" (click)="(masterCategory=cat)">
                      <span
                        *ngIf="!masterCategory  || ( masterCategory.length>0 && cat.toLowerCase().includes(masterCategory.toLowerCase()) ) ">
                        {{cat}}
                      </span>


                    </li>
                  </ul>
                </div>


              </div> -->
              <div class="form-group">
                <label class="strong">For</label>
                <div>
                  <div *ngFor="let gendr of genders" class="form-check form-check-inline">
                    <input class="form-check-input" name="gender-radio" type="radio" [(ngModel)]="gender"
                      id="radio-{{gendr}}" value="{{gendr}}">
                    <label class="form-check-label" for="radio-{{gendr}}">{{gendr}}</label>
                  </div>
                </div>

              </div>

              <div class="form-group">
                <label class="strong">Category</label>
                <input autocomplete="off" class="form-control" [(ngModel)]="subCategory" type="text" id="sub-category"
                  name="sub-category" placeholder="Sub category">

                <div class="drop-down-wrap">
                  <ul class="drop-down-ul">
                    <li *ngFor="let sCat of subCategories" (click)="(subCategory=sCat)">
                      <span
                        *ngIf="subCatFocus && ( !subCategory || ( subCategory.length>0 && sCat.toLowerCase().includes(subCategory.toLowerCase())) )">
                        {{sCat}}
                      </span>


                    </li>
                  </ul>
                </div>
              </div>

              <div class="form-group">
                <label class="strong">Item type</label>
                <input autocomplete="off" class="form-control" [(ngModel)]="articleType" type="text" id="article-type"
                  name="article-type" placeholder="Article type">

                <div class="drop-down-wrap">
                  <ul class="drop-down-ul">
                    <li *ngFor="let article of articleTypes" (click)="(articleType=article)">
                      <span
                        *ngIf="typeFocus && ( !articleType  || ( articleType.length>0 && article.toLowerCase().includes(articleType.toLowerCase()) ) ) ">
                        {{article}}
                      </span>


                    </li>
                  </ul>
                </div>
              </div>

              <div class="form-group">
                <label class="strong">Color</label>
                <input autocomplete="off" class="form-control" [(ngModel)]="color" type="text" id="base-color"
                  name="base-colour" placeholder="Color">

                <div class="drop-down-wrap">
                  <ul class="drop-down-ul">
                    <li *ngFor="let bColor of baseColours" (click)="(color=bColor)">
                      <span
                        *ngIf="colorFocus && ( !color || ( color.length>0 && bColor.toLowerCase().includes(color.toLowerCase()) ) ) ">
                        {{bColor}}
                      </span>


                    </li>
                  </ul>
                </div>
              </div>

              <div class="form-group row">

                <div class="col-md-6">
                  <button type="submit" class="form-control btn btn-info">Search</button>
                </div>
                
                <div class="col-md-6">
                  <button type="reset" class="form-control btn btn-warning" (click)="resetForm()">Reset</button>
                </div>
                
              </div>


              
            </form>
          </div>


        </div>
        <div class="col-lg-9">
          <div class="row">
            <div *ngFor="let product of products | paginate: { itemsPerPage: 9, currentPage: p }; let ind=index"  class="col-lg-4 col-md-6 mb-4 product-card">

              <a [routerLink]="['/search']" [queryParams]="{ image_id: product.image_id}"
                (mouseover)="showDetails('in', $event)" (mouseout)="showDetails('out', $event)"><img
                  class="card-img-custom" src="{{apiLink + '/images/' + product?.image_id }}" alt=""></a>
              <div class="card my-card">
                <div class="card-body my-card-body">
                  <h4 class="card-title">
                    <a href="#">{{product.article_type}}</a>
                  </h4>
                  <p class="card-text">{{product.product_display_name}}</p>
                  <p *ngIf="product.similarity != null" class="card-text">{{product.similarity}}</p>
                </div>
                <div class="card-footer">
                  <small class="text-muted">&#9733; &#9733; &#9733; &#9733; &#9734;</small>
                </div>
              </div>
            </div>
            <div *ngIf="products.length == 0" class="col-lg-6 alert alert-danger mb-4">
               
                No items found
               
            </div> 
          </div>
          <pagination-controls *ngIf="products.length != 0" (pageChange)="p = $event"></pagination-controls>
        </div>

      </div>
      <!-- /.row -->

    </div>
    <!-- /.col-lg-9 -->

  </div>
</div>